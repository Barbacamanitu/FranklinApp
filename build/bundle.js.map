{"version":3,"sources":["webpack:///webpack/bootstrap 959502c10370ab0175aa","webpack:///./src/layers/namedLayer.ts","webpack:///./src/FranklinMap.ts","webpack:///./src/ParcelPopup.ts","webpack:///./src/layers/JsonLayerLoader.ts","webpack:///./src/layers/layerManager.ts","webpack:///./src/layers/layers.json","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 959502c10370ab0175aa","export class NamedLayer{\r\n    name:string;\r\n    type:string;\r\n    autoAdd:boolean;\r\n    layer:any;\r\n    constructor(name:string,type:string,autoAdd:boolean){\r\n        this.name = name;\r\n        this.type = type;\r\n        this.autoAdd = autoAdd;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layers/namedLayer.ts","import { ParcelPopup } from './ParcelPopup';\r\nimport { LayerManager } from './layers/layerManager';\r\ndeclare var cartodb:any;\r\nexport class FranklinMap{\r\n    //Member variables\r\n    lMap:L.Map;\r\n    layerManager:LayerManager;\r\n    constructor(){\r\n        this.lMap = L.map(\"map\", {\r\n            zoom: 11,\r\n            center: [34.4410, -87.8343]\r\n        });\r\n        this.layerManager = new LayerManager(this);\r\n        this.layerManager.loadJsonLayers();\r\n        this.layerManager.loadComplexLayers().then(()=>{\r\n        console.log('loaded complex');});\r\n       /* $(window).keypress((e:JQueryKeyEventObject) => {\r\n            if (e.which == 99){\r\n                this.layerManager.loadComplexLayers().then(()=>{\r\n                    console.log('loaded complex');\r\n                });\r\n            }\r\n\r\n            if (e.which == 97){\r\n                console.log(this.layerManager);\r\n            }\r\n        });*/\r\n\r\n    }\r\n\r\n    getDataFromId(id:number){\r\n        var sql = new cartodb.SQL({ user: 'cartomike' });\r\n        var endpoint = \"https://cartomike.carto.com/api/v2/sql/\";\r\n            // ownerQ = ownerQ.split(\"{NAME}\").join(name);\r\n        var myQuery = \"SELECT *,ST_AsGeoJSON(ST_Centroid(the_geom)) as centroid FROM parcels_carto WHERE cartodb_id = \" + id;\r\n        console.log(\"Making CartoDB GET request for ID: \" + id + \"...\");\r\n        return new Promise((resolve,reject) => {\r\n            $.getJSON(\r\n            endpoint,\r\n            { q: myQuery },\r\n            (data) => resolve(data.rows[0]));\r\n        });       \r\n    }\r\n\r\n    openPopup(item:any)\r\n    {\r\n        var coords = JSON.parse(item.centroid).coordinates.reverse();\r\n        this.lMap.setView(coords,16,{animate: false});\r\n        console.log(\"Should open popup now.\");\r\n        console.log(\"TODO: Add actual popup\");\r\n        console.log(item);\r\n        var p = new ParcelPopup(this,item);\r\n        p.open();\r\n\r\n    }\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FranklinMap.ts","import { FranklinMap } from './FranklinMap';\r\n//import txt = require('raw-loader!./pop.html');\r\nexport class ParcelPopup {\r\n    lPop:L.Popup;\r\n    data:any;\r\n    map: FranklinMap;\r\n    allowedFields:any;\r\n    constructor(map:FranklinMap,data:any){\r\n        this.lPop = L.popup();\r\n        this.data = data;\r\n        this.map = map;\r\n        this.allowedFields = {\r\n            \"fulladdress\" : \"Address:\",\r\n            \"parcelnumber\" : \"Parcel #:\",\r\n            \"zipcode\": \"Zip:\"\r\n        };\r\n        this.open();\r\n    }\r\n\r\n    toTitleCase(str:string)\r\n    {\r\n        return str.replace(/\\w\\S*/g, function(txt:string){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\r\n    }\r\n\r\n    open(){\r\n        var coords = JSON.parse(this.data.centroid).coordinates.reverse();\r\n        this.lPop.setLatLng(coords);\r\n        this.map.lMap.setView(coords,16,{animate: true});\r\n        var html = '<div class=\"popup-container\"> <div class=\"popup-header\"> <span class=\"popup-header-title\">Owner</span> <h3 id=\"owner-name\"></h3> </div> <div class=\"popup-parcel-details\"> </div> <a href=\"#\" id=\"reportLink\">More information</a> </div>';\r\n        var el = $(html);\r\n        var details = el.find('.popup-parcel-details');\r\n\r\n        var owner = el.find(\"#owner-name\");\r\n        if (this.data.ownername)\r\n        {\r\n            owner.text(this.toTitleCase(this.data.ownername));\r\n        }\r\n        else\r\n        {\r\n            owner.text(\"\");\r\n        }\r\n\r\n        for (var property in this.allowedFields)\r\n        {\r\n            if (this.allowedFields.hasOwnProperty(property))\r\n            {\r\n                if (this.data[property] && this.data[property].length > 0)\r\n                {\r\n                    //If property is allowed and included in the item object, create element with details\r\n                    var title = $(\"<h4></h4>\");\r\n                    var desc = $(\"<p></p>\");\r\n                    title.text(this.allowedFields[property]);\r\n                    desc.text(this.data[property]);\r\n                    details.append(title);\r\n                    details.append(desc);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        \r\n        this.lPop.setContent(el.html());\r\n        this.map.lMap.openPopup(this.lPop);\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/ParcelPopup.ts","import { NamedLayer } from './namedLayer';\r\nimport { IJsonLayer } from './IJsonLayer';\r\nexport module JsonLayerLoader{\r\n    export function loadJSONLayers(map:L.Map){\r\n        let json = require('./layers.json');\r\n        let layerDefinitions:Array<IJsonLayer> = json.layers;  \r\n        let namedLayers = new Array<NamedLayer>();\r\n\r\n        layerDefinitions.forEach(def => {\r\n            let nl = this.parseJSONLayer(def);\r\n            if (nl.autoAdd){\r\n                nl.layer.addTo(map);\r\n            }\r\n            namedLayers.push(nl);\r\n        });    \r\n        return namedLayers;\r\n    }\r\n\r\n    export function parseJSONLayer(layerDef:IJsonLayer){\r\n        var name = layerDef.name;\r\n        var type = layerDef.type;\r\n        var opts = layerDef.layerOptions;\r\n        var autoAdd = layerDef.autoAdd;\r\n        var namedLayer = new NamedLayer(name,type,autoAdd);\r\n\r\n        if (type == \"tileLayer\"){\r\n            namedLayer.layer = L.tileLayer(opts.url,opts);\r\n            return namedLayer;\r\n        }\r\n\r\n        if (type == \"esriTiledMapLayer\"){\r\n            namedLayer.layer = L.esri.tiledMapLayer(opts);\r\n            return namedLayer;\r\n        }\r\n\r\n        if (type == \"esriDynamic\"){\r\n            namedLayer.layer = L.esri.dynamicMapLayer(opts);\r\n            return namedLayer;\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layers/JsonLayerLoader.ts","import { FranklinMap } from './../FranklinMap';\r\nimport {NamedLayer} from './namedLayer';\r\nimport {JsonLayerLoader} from './JsonLayerLoader';\r\ndeclare var cartodb:any;\r\nexport class LayerManager{\r\n\r\n    namedLayers:Array<NamedLayer>;\r\n    private lMap:L.Map;\r\n    private fMap:FranklinMap;\r\n    constructor(fMap:FranklinMap){\r\n        this.namedLayers = new Array<NamedLayer>();\r\n        this.lMap = fMap.lMap;\r\n        this.fMap = fMap;\r\n    }\r\n\r\n    loadJsonLayers(){\r\n        \r\n       let p = new Promise((resolve,reject) => {\r\n           let jLayers = JsonLayerLoader.loadJSONLayers(this.lMap);\r\n           this.namedLayers = this.namedLayers.concat(jLayers);\r\n           resolve(this.namedLayers.length);\r\n       });  \r\n    }\r\n\r\n\r\n    loadComplexLayers(){\r\n        console.log(\"Loading complex..\");\r\n        let longPromise = new Promise(function(resolve,reject){\r\n            \r\n            setTimeout(() =>{\r\n                console.log(\"About to fulfill dummy sleep promise\");\r\n                resolve();},1000);\r\n        });\r\n        return Promise.all([ this.createCartoLayer() , longPromise ]);\r\n    }\r\n\r\n    createCartoLayer(){\r\n        new Promise((resolve,reject) => {\r\n            var layerUrl = 'https://cartomike.carto.com/api/v2/viz/92b6a26e-a3c9-11e6-a4a5-0ecd1babdde5/viz.json';\r\n            cartodb.createLayer(this.lMap, layerUrl, {infowindow: false}).addTo(this.lMap).on('done', (layer:any)=> {\r\n                //Config for this carto layer to make interaction work\r\n                layer.setZIndex(10);\r\n                layer.getSubLayer(1).setInteraction(true);\r\n                \r\n                layer.getSubLayer(1).on('featureClick', (e:any, latlng:Object, pos:Object, data:any, lay:any) => {\r\n                   console.log(\"CartoDB Layer clicked on.\");\r\n                   this.fMap.getDataFromId(data.cartodb_id).then((item) => {this.fMap.openPopup(item);});\r\n                });\r\n\r\n                layer.on('mouseover', function() {\r\n                    $('#map').css('cursor','pointer');\r\n                });\r\n                layer.on('mouseout', function() {\r\n                    $('#map').css('cursor','');\r\n                });\r\n\r\n\r\n                let nl = new NamedLayer(\"cartoParcelLayer\",\"carto\",true);\r\n                nl.layer = layer;\r\n                this.namedLayers.push(nl);\r\n                console.log(\"About to fulfill carto promise.\");\r\n                resolve();\r\n            }).on('error',reject);\r\n        });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/layers/layerManager.ts","module.exports = {\n\t\"layers\": [\n\t\t{\n\t\t\t\"name\": \"osmBasemap\",\n\t\t\t\"type\": \"tileLayer\",\n\t\t\t\"autoAdd\": true,\n\t\t\t\"layerOptions\": {\n\t\t\t\t\"url\": \"http://{s}.tiles.mapbox.com/v3/spatialnetworks.map-6l9yntw9/{z}/{x}/{y}.png\",\n\t\t\t\t\"maxZoom\": 19,\n\t\t\t\t\"subdomains\": [\n\t\t\t\t\t\"a\",\n\t\t\t\t\t\"b\",\n\t\t\t\t\t\"c\",\n\t\t\t\t\t\"d\"\n\t\t\t\t],\n\t\t\t\t\"attribution\": \"Basemap <a href=\\\"https://www.mapbox.com/about/maps/\\\" target=\\\"_blank\\\">© Mapbox © OpenStreetMap</a>\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"arcBase\",\n\t\t\t\"type\": \"esriTiledMapLayer\",\n\t\t\t\"autoAdd\": false,\n\t\t\t\"layerOptions\": {\n\t\t\t\t\"url\": \"http://tiles.arcgis.com/tiles/I97nVdg0OgwKVCpk/arcgis/rest/services/Basemap/MapServer\",\n\t\t\t\t\"opacity\": \"0.5\"\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"name\": \"annotations\",\n\t\t\t\"type\": \"esriDynamic\",\n\t\t\t\"autoAdd\": true,\n\t\t\t\"layerOptions\": {\n\t\t\t\t\"url\": \"http://8.35.16.158/arcgisserver/rest/services/parcelanno_dyn/MapServer\",\n\t\t\t\t\"opacity\": 1\n\t\t\t}\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/layers/layers.json\n// module id = 5\n// module chunks = 0","import { FranklinMap } from './FranklinMap';\r\nlet m:FranklinMap = new FranklinMap();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}